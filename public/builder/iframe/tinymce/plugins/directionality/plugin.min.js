!function(t){"use strict";var n,e,o,r,i,u=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(t,n){var e,o=t.dom,r=t.selection.getSelectedBlocks();r.length&&(e=o.getAttrib(r[0],"dir"),c.each(r,(function(t){o.getParent(t.parentNode,'*[dir="'+n+'"]',o.getRoot())||o.setAttrib(t,"dir",e!==n?n:null)})),t.nodeChanged())},d=function(t){return function(){return t}},f=d(!1),a=d(!0),N=function(){return T},T=(r={fold:function(t,n){return t()},is:f,isSome:f,isNone:a,getOr:o=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:o,orThunk:e,map:N,ap:N,each:function(){},bind:N,flatten:N,exists:f,forall:a,filter:N,equals:n=function(t){return t.isNone()},equals_:n,toArray:function(){return[]},toString:d("none()")},Object.freeze&&Object.freeze(r),r),s=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:d(t)}},E=function(t){return"function"===function(t){if(null===t)return"null";var n=typeof t;return"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(t)},g=(Array.prototype.slice,E(Array.from)&&Array.from,t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE,t.Node.DOCUMENT_NODE,t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE,t.Node.TEXT_NODE),m=(t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,i=g,function(t){return t.dom().nodeType===i}),O=function(n,e){return function(o){var r=function(n){var r=s(n.element);o.setActive(("rtl"===function(n,e){var o,r,i=n.dom(),u=t.window.getComputedStyle(i).getPropertyValue(e),c=""!==u||void 0!==(r=m(o=n)?o.dom().parentNode:o.dom())&&null!==r&&r.ownerDocument.body.contains(r)?u:function(t,n){return void 0!==(e=t).style&&E(e.style.getPropertyValue)?t.style.getPropertyValue(n):"";var e}(i,e);return null===c?void 0:c}(r,"direction")?"rtl":"ltr")===e)};return n.on("NodeChange",r),function(){return n.off("NodeChange",r)}}};u.add("directionality",(function(t){(function(t){t.addCommand("mceDirectionLTR",(function(){l(t,"ltr")})),t.addCommand("mceDirectionRTL",(function(){l(t,"rtl")}))})(t),function(t){t.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return t.execCommand("mceDirectionLTR")},onSetup:O(t,"ltr")}),t.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return t.execCommand("mceDirectionRTL")},onSetup:O(t,"rtl")})}(t)}))}(window);