!function(e){"use strict";var n,r,t,i,o,u,s,c,a,f,l=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return l(r())}}},d=tinymce.util.Tools.resolve("tinymce.PluginManager"),m=function(){},h=function(e){return function(){return e}},g=h(!1),v=h(!0),O=g,S=v,p=function(){return E},E=(i={fold:function(e,n){return e()},is:O,isSome:O,isNone:S,getOr:t=function(e){return e},getOrThunk:r=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:t,orThunk:r,map:p,ap:p,each:function(){},bind:p,flatten:p,exists:O,forall:S,filter:p,equals:n=function(e){return e.isNone()},equals_:n,toArray:function(){return[]},toString:h("none()")},Object.freeze&&Object.freeze(i),i),x=function(e){var n=function(){return e},r=function(){return i},t=function(n){return n(e)},i={fold:function(n,r){return r(e)},is:function(n){return e===n},isSome:S,isNone:O,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(n){return x(n(e))},ap:function(n){return n.fold(p,(function(n){return x(n(e))}))},each:function(n){n(e)},bind:t,flatten:n,exists:t,forall:t,filter:function(n){return n(e)?i:E},equals:function(n){return n.is(e)},equals_:function(n,r){return n.fold(O,(function(n){return r(e,n)}))},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},N={some:x,none:p,from:function(e){return null==e?E:x(e)}},w=function(e){return function(n){return function(e){if(null===e)return"null";var n=typeof e;return"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}},y=w("string"),T=w("function"),C=(Array.prototype.slice,T(Array.from)&&Array.from,Object.keys),b=function(e,n){return-1!==e.indexOf(n)},A=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:h(e)}},D=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE,e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,function(n,r,t){if(!y(t))throw e.console.error("Invalid call to CSS.set. Property ",r,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);var i;void 0!==(i=n).style&&T(i.style.getPropertyValue)&&n.style.setProperty(r,t)}),_=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),F=function(e,n){e.fire("FullscreenStateChanged",{state:n})},R=function(){return I(0,0)},I=function(e,n){return{major:e,minor:n}},P=function(e,n){var r=String(n).toLowerCase();return 0===e.length?R():function(e,n){var r=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}}(e,n);if(!r)return{major:0,minor:0};var t=function(e){return Number(n.replace(r,"$"+e))};return I(t(1),t(2))}(e,r)},M=R,L="Firefox",j=function(e,n){return function(){return n===e}},W=function(e){var n=e.current;return{current:n,version:e.version,isEdge:j("Edge",n),isChrome:j("Chrome",n),isIE:j("IE",n),isOpera:j("Opera",n),isFirefox:j(L,n),isSafari:j("Safari",n)}},U=function(){return W({current:void 0,version:M()})},k=W,q=(h("Edge"),h("Chrome"),h("IE"),h("Opera"),h(L),h("Safari"),"Windows"),B="Android",H="Solaris",V="FreeBSD",X=function(e,n){return function(){return n===e}},z=function(e){var n=e.current;return{current:n,version:e.version,isWindows:X(q,n),isiOS:X("iOS",n),isAndroid:X(B,n),isOSX:X("OSX",n),isLinux:X("Linux",n),isSolaris:X(H,n),isFreeBSD:X(V,n)}},Y=function(){return z({current:void 0,version:M()})},G=z,$=(h(q),h("iOS"),h(B),h("Linux"),h("OSX"),h(H),h(V),function(e,n){var r=String(n).toLowerCase();return function(e,n){for(var r=0,t=e.length;r<t;r++){var i=e[r];if(n(i))return N.some(i)}return N.none()}(e,(function(e){return e.search(r)}))}),J=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,K=function(e){return function(n){return b(n,e)}},Q=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return b(e,"edge/")&&b(e,"chrome")&&b(e,"safari")&&b(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,J],search:function(e){return b(e,"chrome")&&!b(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return b(e,"msie")||b(e,"trident")}},{name:"Opera",versionRegexes:[J,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:K("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:K("firefox")},{name:"Safari",versionRegexes:[J,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(b(e,"safari")||b(e,"mobile/"))&&b(e,"applewebkit")}}],Z=[{name:"Windows",search:K("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return b(e,"iphone")||b(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:K("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:K("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:K("linux"),versionRegexes:[]},{name:"Solaris",search:K("sunos"),versionRegexes:[]},{name:"FreeBSD",search:K("freebsd"),versionRegexes:[]}],ee={browsers:h(Q),oses:h(Z)},ne={detect:(s=!(o=function(){return function(e){var n,r,t,i,o,u,s,c,a,f,l,d=ee.browsers(),m=ee.oses(),g=function(e,n){return $(e,n).map((function(e){var r=P(e.versionRegexes,n);return{current:e.name,version:r}}))}(d,e).fold(U,k),v=function(e,n){return $(e,n).map((function(e){var r=P(e.versionRegexes,n);return{current:e.name,version:r}}))}(m,e).fold(Y,G);return{browser:g,os:v,deviceType:(r=g,t=e,i=(n=v).isiOS()&&!0===/ipad/i.test(t),o=n.isiOS()&&!i,u=n.isAndroid()&&3===n.version.major,s=n.isAndroid()&&4===n.version.major,c=i||u||s&&!0===/mobile/i.test(t),a=n.isiOS()||n.isAndroid(),f=a&&!c,l=r.isSafari()&&n.isiOS()&&!1===/safari/i.test(t),{isiPad:h(i),isiPhone:h(o),isTablet:h(c),isPhone:h(f),isTouch:h(a),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:h(l)})}}(e.navigator.userAgent)}),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s||(s=!0,u=o.apply(null,e)),u})},re=_.DOM,te=e.window.visualViewport,ie=ne.detect().browser.isSafari()&&void 0!==te?(c=l(N.none()),a={clear:function(){c.set(N.none())},set:function(e){c.set(N.some(e))},isSet:function(){return c.get().isSome()},on:function(e){c.get().each(e)}},f=function(){e.window.requestAnimationFrame((function(){a.on((function(e){return function(e,n){var r=e.dom();!function(e,n){for(var r=C(e),t=0,i=r.length;t<i;t++){var o=r[t];n(e[o],o)}}(n,(function(e,n){D(r,n,e)}))}(e,{top:te.offsetTop+"px",left:te.offsetLeft+"px",height:te.height+"px",width:te.width+"px"})}))}))},{bind:function(e){a.set(e),f(),te.addEventListener("resize",f),te.addEventListener("scroll",f)},unbind:function(){a.on((function(){te.removeEventListener("scroll",f),te.removeEventListener("resize",f)})),a.clear()}}):{bind:m,unbind:m},oe=function(e,n){return function(r){r.setActive(null!==n.get());var t=function(e){return r.setActive(e.state)};return e.on("FullscreenStateChanged",t),function(){return e.off("FullscreenStateChanged",t)}}};d.add("fullscreen",(function(n){var r=l(null);return n.settings.inline||(function(n,r){n.addCommand("mceFullScreen",(function(){!function(n,r){var t,i,o,u,s,c=e.document.body,a=e.document.documentElement,f=r.get();if(t=(i=n.getContainer()).style,o=n.getContentAreaContainer().firstChild.style,f)o.width=f.iframeWidth,o.height=f.iframeHeight,f.containerWidth&&(t.width=f.containerWidth),f.containerHeight&&(t.height=f.containerHeight),re.removeClass(c,"tox-fullscreen"),re.removeClass(a,"tox-fullscreen"),re.removeClass(i,"tox-fullscreen"),u=f.scrollPos,e.window.scrollTo(u.x,u.y),r.set(null),F(n,!1),ie.unbind(),n.off("remove",ie.unbind);else{var l={scrollPos:(s=re.getViewPort(),{x:s.x,y:s.y}),containerWidth:t.width,containerHeight:t.height,iframeWidth:o.width,iframeHeight:o.height};o.width=o.height="100%",t.width=t.height="",re.addClass(c,"tox-fullscreen"),re.addClass(a,"tox-fullscreen"),re.addClass(i,"tox-fullscreen"),ie.bind(A(i)),n.on("remove",ie.unbind),r.set(l),F(n,!0)}}(n,r)}))}(n,r),function(e,n){e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:oe(e,n)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return e.execCommand("mceFullScreen")},onSetup:oe(e,n)})}(n,r),n.addShortcut("Meta+Shift+F","","mceFullScreen")),function(e){return{isFullscreen:function(){return null!==e.get()}}}(r)}))}(window);