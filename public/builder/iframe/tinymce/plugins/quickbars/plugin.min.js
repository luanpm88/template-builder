!function(e){"use strict";var n,r,t,o,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=0,a=tinymce.util.Tools.resolve("tinymce.util.Promise"),s=function(e){return function(){return e}},c=s(!1),f=s(!0),d=c,l=f,m=function(){return g},g=(o={fold:function(e,n){return e()},is:d,isSome:d,isNone:l,getOr:t=function(e){return e},getOrThunk:r=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:t,orThunk:r,map:m,ap:m,each:function(){},bind:m,flatten:m,exists:d,forall:l,filter:m,equals:n=function(e){return e.isNone()},equals_:n,toArray:function(){return[]},toString:s("none()")},Object.freeze&&Object.freeze(o),o),v=function(e){var n=function(){return e},r=function(){return o},t=function(n){return n(e)},o={fold:function(n,r){return r(e)},is:function(n){return e===n},isSome:l,isNone:d,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(n){return v(n(e))},ap:function(n){return n.fold(m,(function(n){return v(n(e))}))},each:function(n){n(e)},bind:t,flatten:n,exists:t,forall:t,filter:function(n){return n(e)?o:g},equals:function(n){return n.is(e)},equals_:function(n,r){return n.fold(d,(function(n){return r(e,n)}))},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},h={some:v,none:m,from:function(e){return null==e?g:v(e)}},p=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:s(e)}},b=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),O=(e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,function(e){return function(n){return function(e){if(null===e)return"null";var n=typeof e;return"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}}),N=O("string"),E=O("object"),S=O("array"),y=O("boolean"),T=O("undefined"),x=O("function");function w(e,n,r,t,o){return e(r,t)?h.some(r):x(o)&&o(r)?h.none():n(r,t,o)}Array.prototype.slice,x(Array.from)&&Array.from;var _,A,C,D,k=function(){return R(0,0)},R=function(e,n){return{major:e,minor:n}},I=function(e,n){var r=String(n).toLowerCase();return 0===e.length?k():function(e,n){var r=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}}(e,n);if(!r)return{major:0,minor:0};var t=function(e){return Number(n.replace(r,"$"+e))};return R(t(1),t(2))}(e,r)},M=k,q="Firefox",L=function(e,n){return function(){return n===e}},U=function(e){var n=e.current;return{current:n,version:e.version,isEdge:L("Edge",n),isChrome:L("Chrome",n),isIE:L("IE",n),isOpera:L("Opera",n),isFirefox:L(q,n),isSafari:L("Safari",n)}},F=function(){return U({current:void 0,version:M()})},P=U,j=(s("Edge"),s("Chrome"),s("IE"),s("Opera"),s(q),s("Safari"),"Windows"),B="Android",X="Solaris",z="FreeBSD",G=function(e,n){return function(){return n===e}},W=function(e){var n=e.current;return{current:n,version:e.version,isWindows:G(j,n),isiOS:G("iOS",n),isAndroid:G(B,n),isOSX:G("OSX",n),isLinux:G("Linux",n),isSolaris:G(X,n),isFreeBSD:G(z,n)}},Y=function(){return W({current:void 0,version:M()})},$=W,H=(s(j),s("iOS"),s(B),s("Linux"),s("OSX"),s(X),s(z),function(e,n){var r=String(n).toLowerCase();return function(e,n){for(var r=0,t=e.length;r<t;r++){var o=e[r];if(n(o))return h.some(o)}return h.none()}(e,(function(e){return e.search(r)}))}),V=function(e,n){return-1!==e.indexOf(n)},J=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,K=function(e){return function(n){return V(n,e)}},Q=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return V(e,"edge/")&&V(e,"chrome")&&V(e,"safari")&&V(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,J],search:function(e){return V(e,"chrome")&&!V(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return V(e,"msie")||V(e,"trident")}},{name:"Opera",versionRegexes:[J,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:K("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:K("firefox")},{name:"Safari",versionRegexes:[J,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(V(e,"safari")||V(e,"mobile/"))&&V(e,"applewebkit")}}],Z=[{name:"Windows",search:K("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return V(e,"iphone")||V(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:K("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:K("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:K("linux"),versionRegexes:[]},{name:"Solaris",search:K("sunos"),versionRegexes:[]},{name:"FreeBSD",search:K("freebsd"),versionRegexes:[]}],ee={browsers:s(Q),oses:s(Z)},ne=(C=!(_=function(){return function(e){var n,r,t,o,i,u,a,c,f,d,l,m=ee.browsers(),g=ee.oses(),v=function(e,n){return H(e,n).map((function(e){var r=I(e.versionRegexes,n);return{current:e.name,version:r}}))}(m,e).fold(F,P),h=function(e,n){return H(e,n).map((function(e){var r=I(e.versionRegexes,n);return{current:e.name,version:r}}))}(g,e).fold(Y,$);return{browser:v,os:h,deviceType:(r=v,t=e,o=(n=h).isiOS()&&!0===/ipad/i.test(t),i=n.isiOS()&&!o,u=n.isAndroid()&&3===n.version.major,a=n.isAndroid()&&4===n.version.major,c=o||u||a&&!0===/mobile/i.test(t),f=n.isiOS()||n.isAndroid(),d=f&&!c,l=r.isSafari()&&n.isiOS()&&!1===/safari/i.test(t),{isiPad:s(o),isiPhone:s(i),isTablet:s(c),isPhone:s(d),isTouch:s(f),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:s(l)})}}(e.navigator.userAgent)}),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return C||(C=!0,A=_.apply(null,e)),A}),re=b,te=function(e,n){var r=e.dom();if(r.nodeType!==re)return!1;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},oe=({detect:ne}.detect().browser.isIE(),function(e,n,r){for(var t=e.dom(),o=x(r)?r:s(!1);t.parentNode;){t=t.parentNode;var i=p(t);if(n(i))return h.some(i);if(o(i))break}return h.none()}),ie=function(e,n,r){return oe(e,(function(e){return te(e,n)}),r)},ue={getToolbarItemsOr:(D=N,function(e,n,r){return function(e,n){if(!n(e))throw new Error("Default value doesn't match requested type.")}(r,D),function(e,n){if(S(e)||E(e))throw new Error("expected a string but found: "+e);return T(e)?n:y(e)?!1===e?"":n:e}(e.getParam(n,r),r)})};i.add("quickbars",(function(n){(function(n){n.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){new a((function(n){var r;(r=e.document.createElement("input")).type="file",r.style.position="fixed",r.style.left=0,r.style.top=0,r.style.opacity=.001,e.document.body.appendChild(r),r.onchange=function(e){n(Array.prototype.slice.call(e.target.files))},r.click(),r.parentNode.removeChild(r)})).then((function(r){var t=r[0];(function(n){return new a((function(r){var t=new e.FileReader;t.onloadend=function(){r(t.result.split(",")[1])},t.readAsDataURL(n)}))})(t).then((function(e){!function(e,n,r){var t,o,i;o=(t=e.editorUpload.blobCache).create((i=(new Date).getTime(),"mceu_"+Math.floor(1e9*Math.random())+ ++u+String(i)),r,n),t.add(o),e.insertContent(e.dom.createHTML("img",{src:o.blobUri()}))}(n,e,t)}))}))}}),n.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){!function(e){var n;e.plugins.table?e.plugins.table.insertTable(2,2):(n=e).undoManager.transact((function(){var e,r;n.insertContent(function(){var e,n,r;for(r='<table data-mce-id="mce" style="width: 100%">',r+="<tbody>",n=0;n<2;n++){for(r+="<tr>",e=0;e<2;e++)r+="<td><br></td>";r+="</tr>"}return(r+="</tbody>")+"</table>"}()),(e=n.dom.select("*[data-mce-id]")[0]).removeAttribute("data-mce-id"),r=n.dom.select("td,th",e),n.selection.setCursorLocation(r[0],0)}))}(n)}})})(n),function(e){var n=function(e){return ue.getToolbarItemsOr(e,"quickbars_insert_toolbar","quickimage quicktable")}(e);0<n.trim().length&&e.ui.registry.addContextToolbar("quickblock",{predicate:function(n){var r,t,o=p(n),i=e.schema.getTextBlockElements(),u=function(n){return n.dom()===e.getBody()};return(r=o,t=u,w(te,ie,r,"table",t)).fold((function(){return(n=o,r=function(n){return n.dom().nodeName.toLowerCase()in i&&e.dom.isEmpty(n.dom())},t=u,w((function(e){return r(e)}),oe,n,r,t)).isSome();var n,r,t}),(function(){return!1}))},items:n,position:"line",scope:"editor"})}(n),function(e){e.ui.registry.addContextToolbar("imageselection",{predicate:function(e){return"IMG"===e.nodeName||"FIGURE"===e.nodeName&&/image/i.test(e.className)},items:"alignleft aligncenter alignright",position:"node"});var n=function(e){return ue.getToolbarItemsOr(e,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote")}(e);0<n.trim().length&&e.ui.registry.addContextToolbar("textselection",{predicate:function(n){return!e.selection.isCollapsed()},items:n,position:"selection"})}(n)}))}(window);